<div class="container-fluid pt-5">
        <div class="row px-xl-5">
            <!-- Shop Sidebar Start -->
            <div class="col-lg-3 col-md-12">
                
            </div>
            <!-- Shop Sidebar End -->


            <!-- Shop Product Start -->
            <div class="col-lg-9 col-md-12">
                <div class="row pb-3">
                    

          <div class="row px-xl-5 pb-3">
            

    <% products.forEach(product => { %>
        <div class="col-lg-4 col-md-6 col-sm-12 pb-1">
            <div class="card product-item border-0 mb-4">
                <div class="card-header product-img position-relative overflow-hidden bg-transparent border p-0">
                    <% 
  let imgPath = product.variants[0].images[0]; 
  if (!imgPath.startsWith('/')) {
    imgPath = '/product-images/' + imgPath;
  } 
%>
                    <img class="img-fluid w-100" src="<%= imgPath %>" alt="<%= product.name %>">
                </div>
                <div class="card-body border-left border-right text-center p-0 pt-4 pb-3">
                    <h6 class="text-truncate mb-3"><%= product.name %></h6>
                    <div class="d-flex justify-content-center">
                        <h6>₹<%= product.variants[0].price %></h6>
                        <% if(product.variants[0].originalPrice && product.variants[0].originalPrice > product.variants[0].price) { %>
                            <h6 class="text-muted ml-2"><del>₹<%= product.variants[0].originalPrice %></del></h6>
                        <% } %>
                    </div>
                </div>
                <div class="card-footer d-flex justify-content-between bg-light border">
                    <a href="/product/<%= product._id %>" class="btn btn-sm text-dark p-0">
                        <i class="fas fa-eye text-primary mr-1"></i>View Detail
                    </a>
                    <form action="/cart/add-to-cart" method="POST" style="display:inline;">
    <input type="hidden" name="productId" value="<%= product._id %>">
    <input type="hidden" name="quantity" value="1">
    <button type="submit" class="btn btn-sm text-dark p-0">
        <i class="fas fa-shopping-cart text-primary mr-1"></i>Add To Cart
    </button>
</form>

                </div>
            </div>
        </div>
    <% }) %>
</div>
<% 
  const queryParams = [];
  if (category) queryParams.push(`category=${category}`);
  if (subcategory) queryParams.push(`subcategory=${subcategory}`);
  if (search) queryParams.push(`search=${encodeURIComponent(search)}`);
  if (price) {
    const priceArray = Array.isArray(price) ? price : [price];
    priceArray.forEach(p => queryParams.push(`price=${p}`));
  }
  if (sort) {
    const sortArray = Array.isArray(sort) ? sort : [sort];
    sortArray.forEach(s => queryParams.push(`sort=${s}`));
  }

  const baseQuery = queryParams.join('&');
%>

<div class="col-12" style="display: flex; justify-content: center; margin-top: 20px;">
  <nav>
    <ul style="list-style: none; padding: 0; margin: 0; display: flex; gap: 8px;">
      <% if (currentPage > 1) { %>
        <li>
          <a href="?page=<%= currentPage - 1 %><%= baseQuery ? '&' + baseQuery : '' %>"
             style="display: block; padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px; color: #007bff; text-decoration: none; font-weight: 600;">
             &laquo; Previous
          </a>
        </li>
      <% } %>

      <% for (let i = 1; i <= totalPages; i++) { %>
        <li>
          <a href="?page=<%= i %><%= baseQuery ? '&' + baseQuery : '' %>"
             style="display: block; padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px; color: <%= currentPage === i ? '#fff' : '#e56caa' %>; background-color: <%= currentPage === i ? '#e56caa' : 'transparent' %>; font-weight: 600; text-decoration: none;">
             <%= i %>
          </a>
        </li>
      <% } %>

      <% if (currentPage < totalPages) { %>
        <li>
          <a href="?page=<%= currentPage + 1 %><%= baseQuery ? '&' + baseQuery : '' %>"
             style="display: block; padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px; color: #e56caa; text-decoration: none; font-weight: 600;">
             Next &raquo;
          </a>
        </li>
      <% } %>
    </ul>
  </nav>
</div>



                    
                    
                    
                    
                    
            
                </div>
            </div>
            <!-- Shop Product End -->
        </div>
    </div>